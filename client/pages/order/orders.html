<template name="orders">
  <div class="row">
    <div class="col-md-12">
      <h1>
        Orders
        <span class="pull-right">
          <button data-action="createOrder" class="btn btn-primary">
            <i class="glyphicon glyphicon-plus"></i>
            Create Order
          </button>
        </span>
      </h1>
    </div>
    <div class="col-md-12">
      <table class="table table-bordered table-striped table-condensed">
        <thead>
          <tr>
            <th>id</th>
            {{> sortHeader sortBy='name' title='Name'}}
            {{> sortHeader sortBy='weight' title='Weight'}}
            {{> sortHeader sortBy='destination' title='Destination'}}
            {{> sortHeader sortBy='client_id' title='Client'}}
            {{> sortHeader sortBy='createdAt' title='Created'}}
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <!-- this is cursor to Orders.find() -->
          {{#each this}}
          <tr>
            <td>{{_id}}</td>
            <td>{{name}}</td>
            <td>{{weight}}</td>
            <td>{{destination}}</td>
            <td>{{clientNameById client_id}}</td>
            <td>{{timeFromNow createdAt}}</td>
            <td>
              <div class="dropdown">
                <button class="btn btn-default btn-sm" data-toggle="dropdown" >
                  <i class="glyphicon glyphicon-cog"></i>
                </button>
                <ul class="dropdown-menu">
                  <li>
                    <a data-action="edit" href="#">
                      <i class="glyphicon glyphicon-edit"></i>
                      Edit
                    </a>
                  </li>
                  <li>
                    <a data-action="rm" href="#">
                      <i class="glyphicon glyphicon-trash"></i>
                      Remove
                    </a>
                  </li>
                </ul>
              </div>
            </td>
          </tr>
          {{/each}}
        </tbody>
      </table>
    </div>
  </div>

  {{> ordersCreateModal}}
</template>

<template name="sortHeader">
  <td data-action="sort">
    <a href="#">
      <i class="glyphicon glyphicon-sort"></i>
      {{title}}
    </a>
  </td>
</template>
